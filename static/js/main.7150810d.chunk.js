(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{10:function(e,a,t){e.exports={"view-place-information-container":"ViewPlaceInformation_view-place-information-container__2Dkoi","field-container":"ViewPlaceInformation_field-container__1hZ1L",row:"ViewPlaceInformation_row__2VGgm",image:"ViewPlaceInformation_image__3QOR5"}},22:function(e,a,t){e.exports={"map-left-panel-container":"MapLeftPanel_map-left-panel-container__3G7Sn",header:"MapLeftPanel_header__p5nYy","content-container":"MapLeftPanel_content-container__1Ijv3"}},23:function(e,a,t){e.exports={container:"MapLeftPanelFilters_container__3Dwki","search-panel":"MapLeftPanelFilters_search-panel__2yFIG","field-container":"MapLeftPanelFilters_field-container__2l-LX",label:"MapLeftPanelFilters_label__1FoaO"}},28:function(e,a,t){e.exports={container:"MapComponent_container__sVYAx"}},31:function(e,a,t){e.exports={"map-view-place-container":"MapViewPlaces_map-view-place-container__24YEd"}},36:function(e,a,t){},37:function(e,a,t){},49:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(12),i=t.n(c),o=(t(36),t(37),t(28)),l=t.n(o),s=t(8),u=t(15),d=t(20),p=t.n(d),m=t(4),b=t(29),j=t(11),f=t(18),h=null,g={injectProvider:function(e){h=e},get provider(){return h},nearbySearch:function(e,a){return h&&h.nearbySearch(e,a)}},y=Object(f.b)("places/nearbySearch",(function(e,a){var t=a.getState;return new Promise((function(e,a){try{var n=t().places.placeType,r=t().places.location,c=t().places.radius;g.nearbySearch({location:r,radius:c,type:[n],fields:["address_component","adr_address","type","url","website"]},(function(a){return e(a.map((function(e){return{geometry:{location:{lat:e.geometry.location.lat(),lng:e.geometry.location.lng()}},place_id:e.place_id,name:e.name,photos:e.photos&&e.photos.map((function(e){return{url:e.getUrl()}}))||[],business_status:e.business_status,vicinity:e.vicinity}})))}))}catch(i){a(i)}}))})),_=Object(f.c)({name:"places",initialState:{nearbyPlaces:[],nearbyPlacesStatus:"idle",currentPlace:null,placeType:"accounting",location:null,radius:"150000"},reducers:{setCurrentPlace:function(e,a){e.currentPlace=a.payload},setPlaceType:function(e,a){e.placeType=a.payload},setLocation:function(e,a){e.location={lat:a.payload.lat,lng:a.payload.lng}},setRadius:function(e,a){e.radius=a.payload}},extraReducers:function(e){e.addCase(y.pending,(function(e){e.nearbyPlacesStatus="loading"})).addCase(y.fulfilled,(function(e,a){e.nearbyPlacesStatus="success",e.nearbyPlaces=a.payload}))}}),v=_.actions,O=v.setCurrentPlace,x=v.setPlaceType,w=v.setLocation,P=v.setRadius,S=function(e){return e.places.nearbyPlaces},N=function(e){return e.places.currentPlace},C=function(e){return e.places.placeType},L=_.reducer,k=t(22),T=t.n(k),A=t(23),E=t.n(A),M={accounting:"Accounting",airport:"Airport",amusement_park:"Amusement Park",aquarium:"Aquarium",art_gallery:"Art Gallery",atm:"ATM",bakery:"Bakery",bank:"Bank",bar:"Bar",beauty_salon:"Beauty Salon",bicycle_store:"Bicycle Store",book_store:"Book Store",bowling_alley:"Bowling Alley",bus_station:"Bus Station",cafe:"Cafe",campground:"Campground",car_dealer:"Car Dealer",car_rental:"Car Rental",car_repair:"Car Repair",car_wash:"Car Wash",casino:"Casino",cemetery:"Cemetery",church:"Church",city_hall:"City Hall",clothing_store:"Clothing Store",convenience_store:"Convenience Store",courthouse:"Courthouse",dentist:"Dentist",department_store:"Department Store",doctor:"Doctor",drugstore:"Drugstore",electrician:"Electrician",electronics_store:"Electronics store",embassy:"Embassy",fire_station:"Fire Station",florist:"Florist",funeral_home:"Funeral Home",furniture_store:"Furniture Store",gas_station:"Gas Station",gym:"gym",hair_care:"Hair Care",hardware_store:"Hardware Store",hindu_temple:"Hindu temple",home_goods_store:"Home goods store",hospital:"hospital",insurance_agency:"insurance agency",jewelry_store:"Jewelry store",laundry:"Laundry"};function F(){var e=Object(m.c)().search;return r.a.useMemo((function(){return new URLSearchParams(e)}),[e])}var B=t(27);function R(e){var a=new URLSearchParams(window.location.search);return p.a.stringify(Object(B.a)(Object(B.a)({},Object.fromEntries(a.entries())),e))}var D=t(1);function I(){var e=F(),a=Object(m.d)(),t=Object.keys(M).map((function(e){return{value:e,label:M[e]}})),n=Object(j.b)(),r=Object(j.c)(C);return e.has("type")&&n(x(e.get("type"))),Object(D.jsx)("div",{className:E.a.container,children:Object(D.jsxs)("div",{className:E.a["field-container"],children:[Object(D.jsx)("div",{className:E.a.label,children:"Select type of places"}),Object(D.jsx)("select",{onChange:function(e){n(x(e.target.value)),n(y()),a({search:R({type:e.target.value})})},value:r,children:t.map((function(e){var a=e.value,t=e.label;return Object(D.jsx)("option",{value:a,children:t},a)}))})]})})}var V=t(10),G=t.n(V),H={CLOSED_PERMANENTLY:"The business is closed permanently.",CLOSED_TEMPORARILY:"\tThe business is closed temporarily.",OPERATIONAL:"The business is operating normally."};function Y(){F();var e=Object(j.c)(N);return Object(D.jsxs)("div",{className:G.a["view-place-information-container"],children:[e&&Object(D.jsx)("div",{className:G.a["field-container"],children:Object(D.jsx)("div",{className:G.a["field-value"],children:e?e.name:""})}),e&&e.photos&&e.photos.length?Object(D.jsxs)("div",{className:G.a["field-container"],children:[Object(D.jsx)("div",{className:G.a["field-label"],children:"Photo's"}),Object(D.jsx)("div",{className:G.a.row,children:e.photos.map((function(e,a){return Object(D.jsx)("img",{className:G.a.image,alt:"place",src:e.url},a)}))})]}):"",e&&Object(D.jsxs)("div",{className:G.a["field-container"],children:[Object(D.jsx)("div",{className:G.a["field-label"],children:"Status"}),Object(D.jsx)("div",{className:G.a["field-value"],children:e?H[e.business_status]:""})]}),e&&Object(D.jsxs)("div",{className:G.a["field-container"],children:[Object(D.jsx)("div",{className:G.a["field-label"],children:"Vicinity"}),Object(D.jsx)("div",{className:G.a["field-value"],children:e?e.vicinity:""})]}),!e&&Object(D.jsx)("div",{children:"Click on pin on the map to see details"})]})}function J(){return Object(D.jsxs)("div",{className:T.a["map-left-panel-container"],children:[Object(D.jsx)("div",{className:T.a.header,children:"Test task for Kiko Homes"}),Object(D.jsx)(I,{}),Object(D.jsx)("div",{className:T.a["content-container"],children:Object(D.jsx)(Y,{})})]})}var K=t(31),U=t.n(K);function W(){var e=Object(u.c)(),a=(Object(m.d)(),Object(j.c)(S)),t=Object(j.b)();return Object(D.jsx)("div",{className:U.a["map-view-place-container"],children:a.map((function(a){return Object(D.jsx)(u.b,{position:a.geometry.location,onClick:function(){return function(a){t(O(a)),a.geometry&&a.geometry.viewport&&e.fitBounds(a.geometry.viewport)}(a)}},a.place_id)}))})}var q={width:"100%",height:"100%"};function z(e){var a=e.lat,t=e.lng,r=(F(),Object(u.d)({googleMapsApiKey:b.a.GOOGLE_MAPS_API_KEY,libraries:["places","geometry"]})),c=r.isLoaded,i=r.loadError,o=Object(j.b)(),l=Object(n.useState)(null),d=Object(s.a)(l,2),p=d[0],f=d[1],h=Object(m.d)(),_={lat:a,lng:t},v=null,O=function(){var e=p.getCenter(),a=p.getBounds();if(a&&e){var t=a.getNorthEast();return window.google.maps.geometry.spherical.computeDistanceBetween(e,t)}return 1500};return c?Object(D.jsxs)(u.a,{onLoad:function(e){return f(a=e),void g.injectProvider(new window.google.maps.places.PlacesService(a));var a},mapContainerStyle:q,center:_,zoom:15,onCenterChanged:function(){p&&(_=p.getCenter().toJSON(),a===_.lat&&t===_.lng||(v&&clearTimeout(v),v=setTimeout((function(){h({search:R({lat:_.lat.toPrecision(8),lng:_.lng.toPrecision(8)})}),o(w(_)),o(P(O())),o(y())}),500)))},onTilesLoaded:function(){o(w({lat:p.getCenter().lat(),lng:p.getCenter().lng()})),o(P(O())),o(y())},children:[Object(D.jsx)(J,{}),Object(D.jsx)(W,{})]}):i?Object(D.jsx)("div",{children:i}):""}var Q=r.a.memo(z);function X(){var e=F(),a=e.get("lat")&&!isNaN(parseFloat(e.get("lat")))?parseFloat(e.get("lat")):51.488028,t=e.get("lng")&&!isNaN(parseFloat(e.get("lng")))?parseFloat(e.get("lng")):0;return Object(D.jsx)("div",{className:l.a.container,children:Object(D.jsx)(Q,{lat:a,lng:t})})}var Z=t(13);var $=function(){return Object(D.jsx)(Z.a,{children:Object(D.jsx)("div",{className:"App",children:Object(D.jsx)("div",{className:"main-container",children:Object(D.jsx)(X,{})})})})},ee=Object(f.a)({reducer:{places:L}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(Object(D.jsx)(r.a.StrictMode,{children:Object(D.jsx)(j.a,{store:ee,children:Object(D.jsx)($,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[49,1,2]]]);
//# sourceMappingURL=main.7150810d.chunk.js.map